## 목차

---

-

## 📔옵저버 패턴이란?

---

<aside>
💡 옵저버

</aside>

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/61a5c6bf-7a59-4970-897f-bce1b48b7ca4/eb93890a-0df8-4b36-afc4-80b1371e833f/Untitled.png)

## 📔개요

---

> 고민 : 무언가 변경사항이 있을때, 관련 모든 고객(객체)들에게 변경사항을 하나하나 적용하는게 아니고 한번에 일괄적용하는 방법이 없을까?
>

ex) 새로운 제품이 매장에 입고될 때마다 고객들에게 이를 알려야함

- 모든 고객에게 일일이 전화하여 신제품이 출시되었음을 알림
    - 시간과 자원이 많이 듬
    - 신제품에 관심없는 고객들은 반복적인 전화에 불만을 갖게됨
    - 새로운 연락 방식을 추가하거나 기존 방식을 변경하려면 많은 노력이 필요함
- db에 알림수신여부를 Y해놓은 고객을 SELECT한 다음에 알림을 보냄
    - 구현이 간단해질 수는 있으나, 데이터베이스와 애플리케이션의 **강한 결합도**를 가지게 됨 → 응집력(같은 모듈끼리 기능이 뭉쳐있음) 부족
    - 새로운 알림 방식(SMS, 푸시알림)등이 추가되려면 기존에 로직을 많이 수정해야 하고 개별적으로 구현도 필요함 → 코드 복잡성 증가
    - 실시간 반응 어려움 : 데이터베이스에서 값을 가져와서 접근하는 작업은 실시간으로 변경에 반응하는 좋은 태도는 아님(서비스가 커지면 보통 배치로 작업하니까)

## 📔해결방안

---

<aside>
💡 주체 객체에서 변경이 발생하면 해당 주체에 등록된 모든 옵저버들이 업데이트되어 변경 사항을 일괄적받음 → 다시 고객에게 뿌림

</aside>

> 옵저버 패턴은 한 객체의 상태가 바뀌면 그 객체에 의존하는 다른 객체에게 연락이 가고 자동으로 내용이 갱신되는 방식으로 일대다(one-to-many) 의존성을 정의합니다.
>

## 최종 설계도

---

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/61a5c6bf-7a59-4970-897f-bce1b48b7ca4/f47f16d1-63e6-400a-88de-d2c19a1afb37/Untitled.png)

- [ ]  **Subject** : 주제. →옵저버 등록 탈퇴 등 관리하는 인터페이스
- [ ]  **Observer** : 주제의 상태가 바뀌었을 때 호출되는 update메서드
- [ ]  **Subject의 구현클래스(Store)** :
    - 등록 및 해지 메서드 구현
    - 상태가 바뀔 때마다 모든 옵저버에게 연락하는notifyObservers() 메서드
    - 추가로 상태 getter setter도 들어있을 수 있음.
- [ ]  **Observer구현 클래스(Customer)**특정 주제에 대하여 옵저버를 등록해서 연락받는 구현체

> 데이터의 주인은 주제(Subject)이다.
옵저버(Observer)는 데이터가 변경되었을 때
주제에서 갱신해 주기를 기다리는 입장이기에 의존성을 가진다고 할 수 있다.
>

## 장점

---

- [ ]  느슨한 결합

→

**주제(Subject)는 특정 인터페이스(Observer Interface)를 구현한다는 사실만 압니다.**

- 옵저버의 구상 클래스가 무엇인지, 옵저버가 무엇을 하는지는 알 필요도 없다.

**옵저버는 언제든지 새로 추가할 수 있습니다.**

- 주제는 Observer 인터페이스를 구현하는 객체의 목록에만 의존하므로 새로운 옵저버를 추가할 수 있다. 사실 실행 중에 하나의 옵저버를 다른 옵저버로 바꿔도 주제는 계속해서 다른 옵저버에 데이터를 보낼 수 있습니다. 마찬가지로 아무 때나 옵저버를 제거해도 됩니다.

**새로운 형식의 옵저버를 추가할 때도 주제를 변경할 필요가 전혀 없다.**

- 옵저버가 되어야 하는 새로운 구상 클래스가 생기면? 이때도 새로운 클래스 형식을 받아들일 수 있도록 주제를 바꿔야 할 필요는 없다. 새로운 클래스에서 Observer 인터페이스를 구현하고 옵저버로 등록하기만 하면 됨. 주제는 신경 쓸 필요 없다. Observer 인터페이스만 구현한다면 어떤 객체에도 연락할 수 있다.

**주제와 옵저버는 서로 독립적으로 재사용할 수 있다.**

- 주제와 옵저버를 다른 용도로 활용할 일이 있다고 해도 손쉽게 재사용할 수 있다. 그 둘이 서로 단단하게 결합되어 있지 않기 때문

**주제나 옵저버가 달라져도 서로에게 영향을 미치지는 않는다.**

- 서로 느슨하게 결합되어 있으므로 주제나 옵저버 인터페이스를 구현한다는 조건만 만족한다면 어떻게 고쳐도 문제가 생기지 않는다.